# 競プロ用 母関数・形式的冪級数 (FPS) チートシート


## 1. 母関数の種類と定義

| 名称 | 英語略称 | 定義式 | 主な用途 |
| :--- | :--- | :--- | :--- |
| **通常型母関数** | **OGF** | $\displaystyle A(x) = \sum_{n=0}^{\infty} a_n x^n$ | **区別しない**ものの数え上げ<br>(組合せ, 硬貨の支払い, 分割数) |
| **指数型母関数** | **EGF** | $\displaystyle A(x) = \sum_{n=0}^{\infty} a_n \frac{x^n}{n!}$ | **区別する**ものの数え上げ<br>(順列, ラベル付きグラフ, 部屋割り) |

---

## 2. 頻出展開公式 (OGF / EGF)

係数 $a_n$ (または $a_n/n!$) が「1通りの操作」に対応する基本的な部品です。

| 関数 $f(x)$ | 級数展開 $\sum c_n x^n$ | 組合せ論的意味 |
| :--- | :--- | :--- |
| $\displaystyle \frac{1}{1-x}$ | $\displaystyle \sum_{n=0}^{\infty} x^n$ | 何個でも選べる (0個, 1個, 2個...) |
| $\displaystyle \frac{1}{1-x^2}$ | $\displaystyle \sum_{n=0}^{\infty} x^{2n}$ | 偶数個選べる (0個, 2個, 4個...) |
| $\displaystyle \frac{x}{1-x^2}$ | $\displaystyle \sum_{n=0}^{\infty} x^{2n+1}$ | 奇数個選べる (1個, 3個, 5個...) |
| $\displaystyle \frac{1-x^{k+1}}{1-x}$ | $\displaystyle \sum_{i=0}^{k} x^i$ | $k$ 個まで選べる (個数制限付き) |
| $(1+x)^n$ | $\displaystyle \sum_{k=0}^{n} \binom{n}{k} x^k$ | $n$ 個から $k$ 個選ぶ (各要素を選ぶ/選ばない) |
| $\displaystyle \frac{1}{(1-x)^n}$ | $\displaystyle \sum_{k=0}^{\infty} \binom{n+k-1}{k} x^k$ | **重複組合せ** ${}_nH_k$ ($n$ 種類から重複を許して $k$ 個) |
| $e^x$ | $\displaystyle \sum_{n=0}^{\infty} \frac{x^n}{n!}$ | 区別できる要素の基本構成 (EGFで頻出) |
| $e^{ax}$ | $\displaystyle \sum_{n=0}^{\infty} \frac{a^nx^n}{n!}$ | 区別できる要素の基本構成 (EGFで頻出) |
| $-\log(1-x)$ | $\displaystyle \sum_{n=1}^{\infty} \frac{x^n}{n}$ | サイクル、連結成分の数え上げ |
